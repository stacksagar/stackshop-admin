(this["webpackJsonpstackshop-admin-app"]=this["webpackJsonpstackshop-admin-app"]||[]).push([[0],{46:function(e,t,r){},74:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r.n(c),a=r(25),s=r.n(a),o=(r(46),r(13)),i=r(7),l=r(16),u=r(2),d=r(3),j=r(4),b=r(17),O=r(1),E=function(e){var t=e.loading,r=e.text,c=e.type,n=e.bg,a=Object(b.a)(e,["loading","text","type","bg"]);return Object(O.jsxs)("button",Object(u.a)(Object(u.a)({},a),{},{type:c||"button",className:"".concat(n||"bg-blue-500"," text-white outline-none focus:ring p-2 rounded-sm relative"),children:[Object(O.jsx)("span",{children:r}),t?Object(O.jsx)("span",{className:"border-2 block w-5 h-5 rounded-full absolute inset-y-0 right-5 my-auto animate-spin",style:{borderTopColor:"transparent"}}):Object(O.jsx)(O.Fragment,{})]}))},p=function(e){return e.split("")[0].toUpperCase()+e.substr(1).toLowerCase()},x=function(e){var t=e.type,r=e.id,c=e.optional,n=e.notLabel,a=Object(b.a)(e,["type","id","optional","notLabel"]);return Object(O.jsxs)("div",{className:"flex flex-col",children:[n?Object(O.jsx)(O.Fragment,{}):Object(O.jsxs)("label",{htmlFor:r,children:[Object(O.jsx)("span",{className:"text-sm",children:p(r)}),Object(O.jsxs)("span",{className:"text-xs",children:[" ",c?"(optional)":"*"," "]})]}),Object(O.jsx)("input",Object(u.a)(Object(u.a)({style:{padding:"5px 10px"}},a),{},{type:t||"text",name:r,id:r,className:"focus:ring rounded-sm outline-none"}))]})},h=r(5),f=r.n(h),m=r(8),g={SIGNIN_REQUEST:"SIGNIN_REQUEST",SIGNIN_FAILED:"SIGNIN_FAILED",SIGNIN_SUCCESS:"SIGNIN_SUCCESS",SIGNUP_REQUEST:"SIGNUP_REQUEST",SIGNUP_FAILED:"SIGNUP_FAILED",SIGNUP_SUCCESS:"SIGNUP_SUCCESS",LOGOUT:"LOGOUT"},_=r(40),S=r.n(_).a.create({headers:{"Context-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},baseURL:"https://stackshop-server.herokuapp.com"}),C=function(){var e=Object(m.a)(f.a.mark((function e(t,r){var c,n,a,s,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:g.SIGNIN_REQUEST}),e.prev=1,e.next=4,S.post("/api/auth/admin/signin",r);case 4:if(c=e.sent,n=c.data,a=n.user,s=n.success,o=n.error,i=n.token,!o&&s){e.next=12;break}throw new Error(o||"something wrong");case 12:t({type:g.SIGNIN_SUCCESS,payload:{user:a}}),localStorage.setItem("token",i),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t({type:g.SIGNIN_FAILED,payload:{error:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(f.a.mark((function e(t,r){var c,n,a,s,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:g.SIGNUP_REQUEST}),e.prev=1,e.next=4,S.post("/api/auth/admin/signup",Object(u.a)(Object(u.a)({},r),{},{role:"admin"}));case 4:if(c=e.sent,n=c.data,a=n.user,s=n.success,o=n.error,i=n.token,!o&&s){e.next=12;break}throw new Error(o||"something wrong");case 12:t({type:g.SIGNUP_SUCCESS,payload:{user:a}}),localStorage.setItem("token",i),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t({type:g.SIGNUP_FAILED,payload:{error:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,r){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(f.a.mark((function e(t){var r,c,n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,S.get("/api/auth/admin/user");case 5:if(r=e.sent,c=r.data,n=c.user,a=c.success,!(s=c.error)&&a){e.next=12;break}throw new Error(s||"something wrong");case 12:t({type:g.SIGNIN_SUCCESS,payload:{user:n}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),t({type:g.SIGNIN_FAILED,payload:{error:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.c)((function(e){return e.auth})),t=Object(j.b)(),r=Object(c.useState)({}),n=Object(d.a)(r,2),a=n[0],s=n[1];function o(e){s((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(l.a)({},e.target.name,e.target.value))}))}return Object(O.jsx)("div",{className:"flex justify-center items-center w-full bg-gray-600 h-minus_header",children:Object(O.jsxs)("form",{className:"bg-gray-300 flex flex-col space-y-5 p-8 rounded-sm w-96",onSubmit:function(e){e.preventDefault(),C(t,a)},children:[Object(O.jsxs)("h3",{className:"text-lg",children:["Signin to",Object(O.jsxs)("span",{className:"bg-white px-2 mx-2 rounded-sm",children:["stack",Object(O.jsx)("span",{className:"font-semibold text-blue-500",children:"shop"})]}),"as a admin."]}),e.error?Object(O.jsx)("p",{className:"text-red-500",children:e.error}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)(x,{onChange:o,id:"email",type:"email"}),Object(O.jsx)(x,{onChange:o,id:"password",type:"password"}),Object(O.jsx)(E,{type:"submit",text:"Sign in",loading:e.loading})]})})},y=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.auth})),r=function(){!function(e){e({type:g.LOGOUT}),localStorage.clear()}(e)};return Object(O.jsxs)("header",{className:"w-full flex h-header bg-gray-700 text-white items-center justify-around",children:[Object(O.jsx)(o.b,{to:"/",children:Object(O.jsx)("div",{children:"LOGO"})}),Object(O.jsx)("nav",{className:"flex space-x-5",children:(null===t||void 0===t?void 0:t.authenticated)?Object(O.jsx)("button",{onClick:r,className:"",children:"Sign Out"}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.b,{to:"/signin",children:Object(O.jsx)("button",{onClick:r,className:"",children:"Sign In"})}),Object(O.jsx)(o.b,{to:"/signup",children:Object(O.jsx)("button",{onClick:r,className:"",children:"Sign Up"})})]})})]})},U=function(e){var t=e.component,r=Object(b.a)(e,["component"]);return Object(j.c)((function(e){return e.auth})).authenticated?Object(O.jsx)(i.b,Object(u.a)(Object(u.a)({},r),{},{component:t})):Object(O.jsx)(i.a,{to:"/signin"})},D=function(e){var t=e.component,r=Object(b.a)(e,["component"]);return Object(j.c)((function(e){return e.auth})).authenticated?Object(O.jsx)(i.a,{to:"/"}):Object(O.jsx)(i.b,Object(u.a)(Object(u.a)({},r),{},{component:t}))},w=function(){var e=Object(j.c)((function(e){return e.auth})),t=Object(j.b)(),r=Object(c.useState)({}),n=Object(d.a)(r,2),a=n[0],s=n[1];function o(e){s((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(l.a)({},e.target.name,e.target.value))}))}return Object(O.jsx)("div",{className:"flex justify-center items-center w-full bg-gray-600 h-minus_header",children:Object(O.jsxs)("form",{className:"bg-gray-300 flex flex-col space-y-5 p-8 rounded-sm w-96",onSubmit:function(e){e.preventDefault(),v(t,a)},children:[Object(O.jsxs)("h3",{className:"text-lg",children:["signup to",Object(O.jsxs)("span",{className:"bg-white px-2 mx-2 rounded-sm",children:["stack",Object(O.jsx)("span",{className:"font-semibold text-blue-500",children:"shop"})]}),"as a admin."]}),e.error?Object(O.jsx)("p",{className:"text-red-500",children:e.error}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)(x,{onChange:o,id:"name"}),Object(O.jsx)(x,{onChange:o,id:"email",type:"email"}),Object(O.jsx)(x,{onChange:o,id:"password",type:"password"}),Object(O.jsx)(E,{type:"submit",text:"Sign Up",loading:e.loading})]})})},N={CREATE_PRODUCT_REQUEST:"CREATE_PRODUCT_REQUEST",CREATE_PRODUCT_FAILED:"CREATE_PRODUCT_FAILED",CREATE_PRODUCT_SUCCESS:"CREATE_PRODUCT_SUCCESS",DELETE_PRODUCT_REQUEST:"DELETE_PRODUCT_REQUEST",DELETE_PRODUCT_FAILED:"DELETE_PRODUCT_FAILED",DELETE_PRODUCT_SUCCESS:"DELETE_PRODUCT_SUCCESS",UPDATE_PRODUCT_REQUEST:"UPDATE_PRODUCT_REQUEST",UPDATE_PRODUCT_FAILED:"UPDATE_PRODUCT_FAILED",UPDATE_PRODUCT_SUCCESS:"UPDATE_PRODUCT_SUCCESS",GET_PRODUCT_REQUEST:"GET_PRODUCT_REQUEST",GET_PRODUCT_FAILED:"GET_PRODUCT_FAILED",GET_PRODUCT_SUCCESS:"GET_PRODUCT_SUCCESS",GET_PRODUCTS_REQUEST:"GET_PRODUCTS_REQUEST",GET_PRODUCTS_FAILED:"GET_PRODUCTS_FAILED",GET_PRODUCTS_SUCCESS:"GET_PRODUCTS_SUCCESS",RESET_ERROR:"RESET_ERROR"},A=function(e){setTimeout((function(){e({type:N.RESET_ERROR})}),3e3)},P=function(){var e=Object(m.a)(f.a.mark((function e(t){var r,c,n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:N.GET_PRODUCTS_REQUEST}),e.prev=1,e.next=4,S.get("/api/product");case 4:if(r=e.sent,c=r.data,n=c.success,a=c.error,s=c.products,!a&&n){e.next=11;break}throw new Error(a||"something wrong!");case 11:t({type:N.GET_PRODUCTS_SUCCESS,payload:{products:s}}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:N.GET_PRODUCTS_FAILED,payload:{error:e.t0.message}}),A(t);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(m.a)(f.a.mark((function e(t,r){var c,n,a,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:N.DELETE_PRODUCT_REQUEST}),e.prev=1,e.next=4,S.delete("/api/product/delete/".concat(r));case 4:if(c=e.sent,n=c.data,a=n.success,s=n.error,o=n.deleted,!s&&a){e.next=11;break}throw new Error(s||"something wrong!");case 11:t({type:N.DELETE_PRODUCT_SUCCESS,payload:{deleted:o}}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:N.DELETE_PRODUCT_FAILED,payload:{error:e.t0.message}}),A(t);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(f.a.mark((function e(t,r,c){var n,a,s,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:N.CREATE_PRODUCT_REQUEST}),e.prev=1,e.next=4,S.post("/api/product/create",r);case 4:if(n=e.sent,a=n.data,s=a.error,o=a.success,i=a.product,!s&&o){e.next=11;break}throw new Error(s||"something wrong!");case 11:t({type:N.CREATE_PRODUCT_SUCCESS,payload:{product:i}}),c(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),t({type:N.CREATE_PRODUCT_FAILED,payload:{error:e.t0.message}}),A(t);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,r,c){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(f.a.mark((function e(t,r,c,n){var a,s,o,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:N.UPDATE_PRODUCT_REQUEST}),e.prev=1,e.next=4,S.put("/api/product/update/".concat(n),r);case 4:if(a=e.sent,s=a.data,o=s.error,i=s.success,l=s.product,!o&&i){e.next=11;break}throw new Error(o||"something wrong!");case 11:t({type:N.UPDATE_PRODUCT_SUCCESS,payload:{product:l}}),c(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),t({type:N.UPDATE_PRODUCT_FAILED,payload:{error:e.t0.message}}),A(t);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,r,c,n){return e.apply(this,arguments)}}(),L=function(e){var t=e.path,r=e.children,c=Object(i.g)().pathname;return Object(O.jsx)("button",{className:" ".concat(c.toLowerCase()===t.toLowerCase()?"bg-gray-500 ":""," px-3 py-2 mb-2 w-full text-sm text-white rounded-l focus:ring hover:bg-gray-600 text-left"),children:r})},F=function(e){var t=e.px,r=e.children;return Object(O.jsxs)("div",{className:"w-full h-minus_header flex justify-between",children:[Object(O.jsxs)("div",{className:"w-44 py-2 pl-2 bg-gray-800",children:[Object(O.jsx)(o.b,{to:"/",children:Object(O.jsx)(L,{path:"/",children:"Dashboard"})}),Object(O.jsx)(o.b,{to:"/categories",children:Object(O.jsx)(L,{path:"/categories",children:"Categories"})}),Object(O.jsx)(o.b,{to:"/products",children:Object(O.jsx)(L,{path:"/products",children:"Products"})}),Object(O.jsx)(o.b,{to:"/orders",children:Object(O.jsx)(L,{path:"/orders",children:"Order"})})]}),Object(O.jsx)("div",{className:"w-full h-minus_header overflow-y-scroll bg-gray-600 ".concat(t&&"px-9"),children:r})]})},Q=function(e){var t=e.text,r=Object(b.a)(e,["text"]);return Object(O.jsx)("button",Object(u.a)(Object(u.a)({},r),{},{className:"text-xs px-2 py-1 rounded outline-none focus:ring-1 bg-blue-500",children:t}))},Y=function(e){var t,r=e.index,c=e.product,n=e.setShowDPHandler,a=e.setShowUPHandler,s=Object(j.b)();return Object(O.jsxs)("tr",{className:"bg-gray-900 text-center text-sm",children:[Object(O.jsx)("td",{className:"p-3",children:r}),Object(O.jsx)("td",{className:"p-3 text-left",children:null===c||void 0===c?void 0:c.name}),Object(O.jsxs)("td",{className:"p-3 tracking-wider text-gray-200",children:["Tk.",null===c||void 0===c?void 0:c.price.toLocaleString("en-US")]}),Object(O.jsx)("td",{className:"p-3",children:null===c||void 0===c?void 0:c.quantity}),Object(O.jsx)("td",{className:"p-3",children:null===c||void 0===c||null===(t=c.category)||void 0===t?void 0:t.name}),Object(O.jsx)("td",{className:"p-3",children:Object(O.jsxs)("div",{className:"flex justify-center space-x-3",children:[Object(O.jsx)(Q,{onClick:function(){return a(c)},text:"Edit"}),Object(O.jsx)(Q,{onClick:function(){return n(c)},text:"Details"}),Object(O.jsx)(Q,{onClick:function(){return e=null===c||void 0===c?void 0:c._id,void G(s,e);var e},text:"Delete"})]})})]})},z=function(e){var t=e.products,r=e.setShowDPHandler,c=e.setShowUPHandler;return Object(O.jsxs)("table",{className:"table text-gray-300 border-separate space-y-12 w-full",children:[Object(O.jsx)("thead",{className:"bg-gray-800 text-white sticky top-0",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"p-3 font-semibold tracking-wider",children:"#"}),Object(O.jsx)("th",{className:"p-3 font-semibold tracking-wider",children:"Name"}),Object(O.jsx)("th",{className:"p-3 font-semibold tracking-wider",children:"Price"}),Object(O.jsx)("th",{className:"p-3 font-semibold tracking-wider",children:"Quantity"}),Object(O.jsx)("th",{className:"p-3 font-semibold tracking-wider",children:"Category"}),Object(O.jsx)("th",{className:"p-3 font-semibold tracking-wider",children:"Action"})]})}),Object(O.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)(Y,{index:t,product:e,setShowUPHandler:c,setShowDPHandler:r},t)}))})]})},M=function(){return Object(O.jsx)("div",{className:"w-full z-50 h-full flex items-center justify-center",children:Object(O.jsx)("div",{className:"w-10 h-10 rounded-full border-4 border-white animate-spin",style:{borderRightColor:"#999"}})})},H=r(9),q=r(19),B=r(18),J=function(e){var t,r=e.c,n=e.setSelectedCategory,a=Object(c.useState)(!1),s=Object(d.a)(a,2),o=s[0],i=s[1];return Object(O.jsxs)("li",{className:"px-4 w-full text-xs ".concat(o&&r.children.length>0?"my-1 border-l border-b border-gray-400 ":""),children:[Object(O.jsxs)("div",{className:"flex items-center",children:[!o&&Object(O.jsx)("div",{className:"relative w-5 h-0.5 -ml-9 bg-transparent"}),Object(O.jsxs)("div",{className:"flex p-1 transition-none items-center space-x-1 ".concat(o&&r.children.length>0&&"-ml-4"," "),children:[Object(O.jsx)("button",{onClick:function(){return n(r)},type:"button",children:r.name}),(null===r||void 0===r||null===(t=r.children)||void 0===t?void 0:t.length)>0&&Object(O.jsx)("button",{type:"button",onClick:function(){return i((function(e){return!e}))},className:"border text-xs",children:o?Object(O.jsx)(B.c,{className:"w-4"}):Object(O.jsx)(B.d,{className:"w-4"})})]})]}),o&&Object(O.jsx)(K,{categories:null===r||void 0===r?void 0:r.children,setSelectedCategory:n})]})};function K(e){var t=e.categories,r=e.setSelectedCategory;return Object(O.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)(J,{setSelectedCategory:r,c:e},t)}))})}function V(e){var t=e.categories,r=e.selectedCategory,c=e.setSelectedCategory;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("label",{htmlFor:"",className:"text-sm",children:["Select Parent Category ",Object(O.jsx)("span",{className:"text-xs",children:"(optional)"})]}),(null===r||void 0===r?void 0:r.name)&&Object(O.jsxs)("p",{className:"bg-white p-2 mb-1 text-sm relative",children:[null===r||void 0===r?void 0:r.name,Object(O.jsx)("span",{onClick:function(){return c({})},className:"absolute inset-y-0 flex justify-center items-center bg-red-500 text-white cursor-pointer rounded-full w-5 h-5 right-5 m-auto text-lg",children:"\xd7"})]}),Object(O.jsx)("div",{className:"max-h-40 overflow-y-auto bg-white p-2",children:Object(O.jsx)(K,{setSelectedCategory:c,categories:t})})]})}var W={CREATE_CATEGORY_REQUEST:"CREATE_CATEGORY_REQUEST",CREATE_CATEGORY_FAILED:"CREATE_CATEGORY_FAILED",CREATE_CATEGORY_SUCCESS:"CREATE_CATEGORY_SUCCESS",UPDATE_CATEGORY_REQUEST:"UPDATE_CATEGORY_REQUEST",UPDATE_CATEGORY_FAILED:"UPDATE_CATEGORY_FAILED",UPDATE_CATEGORY_SUCCESS:"UPDATE_CATEGORY_SUCCESS",DELETE_CATEGORY_REQUEST:"DELETE_CATEGORY_REQUEST",DELETE_CATEGORY_FAILED:"DELETE_CATEGORY_FAILED",DELETE_CATEGORY_SUCCESS:"DELETE_CATEGORY_SUCCESS",GET_CATEGORY_REQUEST:"GET_CATEGORY_REQUEST",GET_CATEGORY_FAILED:"GET_CATEGORY_FAILED",GET_CATEGORY_SUCCESS:"GET_CATEGORY_SUCCESS",GET_CATEGORIES_REQUEST:"GET_CATEGORIES_REQUEST",GET_CATEGORIES_FAILED:"GET_CATEGORIES_FAILED",GET_CATEGORIES_SUCCESS:"GET_CATEGORIES_SUCCESS",RESET_ERROR:"RESET_ERROR"},X=function(e){setTimeout((function(){e({type:W.RESET_ERROR})}),3e3)},Z=function(){var e=Object(m.a)(f.a.mark((function e(t,r,c){var n,a,s,o,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:W.DELETE_CATEGORY_REQUEST}),e.prev=1,e.next=4,S.delete("/api/category/delete/".concat(r));case 4:if(n=e.sent,a=n.data,s=a.success,o=a.error,i=a.deleted,l=a.categories,!o&&s){e.next=12;break}throw new Error(o||"something wrong!");case 12:t({type:W.DELETE_CATEGORY_SUCCESS,payload:{deleted:i,categories:l}}),c(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),t({type:W.DELETE_CATEGORY_FAILED,payload:{error:e.t0.message}}),X(t);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,r,c){return e.apply(this,arguments)}}(),$=function(){var e=Object(m.a)(f.a.mark((function e(t,r,c){var n,a,s,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:W.CREATE_CATEGORY_REQUEST}),e.prev=1,e.next=4,S.post("/api/category/create",r);case 4:if(n=e.sent,a=n.data,s=a.success,o=a.error,i=a.category,!o&&s){e.next=11;break}throw new Error(o||"something wrong!");case 11:t({type:W.CREATE_CATEGORY_SUCCESS,payload:{category:i}}),c(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),t({type:W.CREATE_CATEGORY_FAILED,payload:{error:e.t0.message}}),X(t);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,r,c){return e.apply(this,arguments)}}(),ee=function(){var e=Object(m.a)(f.a.mark((function e(t,r,c){var n,a,s,o,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:W.UPDATE_CATEGORY_REQUEST}),e.prev=1,e.next=4,S.put("/api/category/update",r);case 4:if(n=e.sent,a=n.data,s=a.success,o=a.error,i=a.category,l=a.categories,!o&&s){e.next=12;break}throw new Error(o||"something wrong!");case 12:t({type:W.UPDATE_CATEGORY_SUCCESS,payload:{category:i,categories:l}}),c(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),t({type:W.UPDATE_CATEGORY_FAILED,payload:{error:e.t0.message}}),X(t);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,r,c){return e.apply(this,arguments)}}(),te=function(){var e=Object(m.a)(f.a.mark((function e(t){var r,c,n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:W.GET_CATEGORIES_REQUEST}),e.prev=1,e.next=4,S.get("/api/category/all");case 4:if(r=e.sent,c=r.data,n=c.success,a=c.error,s=c.categories,!a&&n){e.next=11;break}throw new Error(a||"something wrong!");case 11:t({type:W.GET_CATEGORIES_SUCCESS,payload:{categories:s}}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:W.GET_CATEGORIES_FAILED,payload:{error:e.t0.message}}),X(t);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),re=function(e){e.showANP;var t=e.setShowANP,r=Object(j.b)(),n=Object(j.c)((function(e){return e.products})),a=n.create_loading,s=n.create_error,o=Object(j.c)((function(e){return e.categories})),i=o.categories,b=o.fetched,p=Object(c.useState)({}),h=Object(d.a)(p,2),f=h[0],m=h[1],g=Object(c.useState)([]),_=Object(d.a)(g,2),S=_[0],C=_[1],v=Object(c.useState)([]),T=Object(d.a)(v,2),R=T[0],y=T[1],U=Object(c.useState)({}),D=Object(d.a)(U,2),w=D[0],N=D[1];function A(e){m((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(l.a)({},e.target.name,e.target.value))}))}return Object(c.useEffect)((function(){R.length>0&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{images:R})})),(null===w||void 0===w?void 0:w.name)&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{category:w._id})}))}),[R,w]),Object(c.useEffect)((function(){b||te(r)}),[r,b]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{onClick:function(){return t(!1)},className:"fixed inset-0 m-auto bg-black bg-opacity-25 z-40"}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=new FormData;Object.entries(f).map((function(e){var t=Object(d.a)(e,2),r=t[0],n=t[1];if("images"===r){var a,s=Object(q.a)(n);try{for(s.s();!(a=s.n()).done;){var o=a.value;c.append("image",o)}}catch(i){s.e(i)}finally{s.f()}}else c.append(r,n);return null})),k(r,c,t)},className:"bg-gray-200 overflow-y-auto fixed inset-0 m-auto z-50 w-96 p-5 h-minus_header flex flex-col space-y-3",children:[Object(O.jsx)("button",{onClick:function(){return t(!1)},type:"button",className:"absolute top-3 right-4 text-lg",children:"\xd7"}),Object(O.jsx)("p",{className:"py-0.5 text-lg text-blue-500",children:"Add New Product"}),s&&Object(O.jsx)("p",{className:"py-0.5 text-sm text-red-500",children:s}),Object(O.jsx)(x,{onChange:A,id:"name"}),Object(O.jsx)(V,{categories:i,selectedCategory:w,setSelectedCategory:N}),Object(O.jsx)(x,{onChange:A,id:"price"}),Object(O.jsx)(x,{onChange:A,id:"quantity"}),Object(O.jsx)(x,{onChange:A,id:"description",optional:!0}),Object(O.jsx)(x,{type:"file",multiple:!0,onChange:function(e){e.target.files.length>0&&(C([]),y([]));var t,r=e.target.files,c=Object(q.a)(r);try{var n=function(){var e=t.value;y((function(t){return[].concat(Object(H.a)(t),[e])}));var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){C((function(t){return[].concat(Object(H.a)(t),[e.target.result])}))}};for(c.s();!(t=c.n()).done;)n()}catch(a){c.e(a)}finally{c.f()}},id:"images"}),Object(O.jsx)("div",{children:S.map((function(e,t){return Object(O.jsx)("img",{alt:"",src:e,className:"w-16 h-10 object-cover inline-block ml-1 mt-1"},t)}))}),Object(O.jsx)(E,{type:"submit",text:"Upload Product",loading:a})]})]})},ce=function(e){var t=e.setShowUP,r=e.selectedUP,n=Object(j.b)(),a=Object(j.c)((function(e){return e.products})),s=a.update_loading,o=a.update_error,i=Object(j.c)((function(e){return e.categories})),b=i.categories,p=i.fetched,h=Object(c.useState)({}),f=Object(d.a)(h,2),m=f[0],g=f[1],_=Object(c.useState)([]),S=Object(d.a)(_,2),C=S[0],v=S[1],T=Object(c.useState)([]),R=Object(d.a)(T,2),y=R[0],U=R[1],D=Object(c.useState)({}),w=Object(d.a)(D,2),N=w[0],A=w[1];function P(e){g((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(l.a)({},e.target.name,e.target.value))}))}return Object(c.useEffect)((function(){Object.keys(r).length>0&&(Object.values(null===r||void 0===r?void 0:r.images).map((function(e){return v((function(t){return[].concat(Object(H.a)(t),[e.image])}))})),A(r.category),g((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:r.name,price:r.price,quantity:r.quantity,description:r.description})})))}),[r]),Object(c.useEffect)((function(){y.length>0&&g((function(e){return Object(u.a)(Object(u.a)({},e),{},{images:y})})),(null===N||void 0===N?void 0:N.name)&&g((function(e){return Object(u.a)(Object(u.a)({},e),{},{category:N._id})}))}),[y,N]),Object(c.useEffect)((function(){p||te(n)}),[n,p]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{onClick:function(){return t(!1)},className:"fixed inset-0 m-auto bg-black bg-opacity-25 z-40"}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=new FormData;Object.entries(m).map((function(e){var t=Object(d.a)(e,2),r=t[0],n=t[1];if("images"===r){var a,s=Object(q.a)(n);try{for(s.s();!(a=s.n()).done;){var o=a.value;c.append("image",o)}}catch(i){s.e(i)}finally{s.f()}}else c.append(r,n);return null})),I(n,c,t,r._id)},className:"bg-gray-200 overflow-y-auto fixed inset-0 m-auto z-50 w-96 p-5 h-minus_header flex flex-col space-y-3",children:[Object(O.jsx)("button",{onClick:function(){return t(!1)},type:"button",className:"absolute top-3 right-4 text-lg",children:"\xd7"}),Object(O.jsx)("p",{className:"py-0.5 text-lg text-blue-500",children:"Update Product"}),o&&Object(O.jsx)("p",{className:"py-0.5 text-sm text-red-500",children:o}),Object(O.jsx)(x,{value:(null===m||void 0===m?void 0:m.name)||"",onChange:P,id:"name"}),Object(O.jsx)(V,{categories:b,selectedCategory:N,setSelectedCategory:A}),Object(O.jsx)(x,{value:(null===m||void 0===m?void 0:m.price)||"",onChange:P,id:"price"}),Object(O.jsx)(x,{value:(null===m||void 0===m?void 0:m.quantity)||"",onChange:P,id:"quantity"}),Object(O.jsx)(x,{value:(null===m||void 0===m?void 0:m.description)||"",onChange:P,id:"description",optional:!0}),Object(O.jsx)("input",{type:"file",multiple:!0,name:"images",id:"images",onChange:function(e){e.target.files.length>0&&(v([]),U([]));var t,r=e.target.files,c=Object(q.a)(r);try{var n=function(){var e=t.value;U((function(t){return[].concat(Object(H.a)(t),[e])}));var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){v((function(t){return[].concat(Object(H.a)(t),[e.target.result])}))}};for(c.s();!(t=c.n()).done;)n()}catch(a){c.e(a)}finally{c.f()}}}),Object(O.jsx)("div",{children:C.map((function(e,t){return Object(O.jsx)("img",{alt:"",src:e,className:"w-16 h-10 object-cover inline-block ml-1 mt-1"},t)}))}),Object(O.jsx)(E,{type:"submit",text:"Upload Product",loading:s})]})]})},ne=function(e){var t=e.product,r=e.setShowDP;return Object(O.jsxs)("div",{className:"fixed inset-0 m-auto flex items-center justify-center",children:[Object(O.jsx)("div",{onClick:function(){return r(!1)},className:"bg-opacity-25 bg-black fixed inset-0 m-auto z-40"}),Object(O.jsxs)("div",{className:"relative z-50 bg-white p-12 overflow-y-auto rounded max-h-minus_header max-w-screen-md flex flex-col space-y-4",children:[Object(O.jsx)("span",{onClick:function(){return r(!1)},className:"absolute cursor-pointer right-4 top-3 text-xl text-black",children:"\xd7"}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Name:"})," ",null===t||void 0===t?void 0:t.name]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Price:"})," ",null===t||void 0===t?void 0:t.price]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Quantity:"})," ",null===t||void 0===t?void 0:t.quantity]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Category:"})," ",null===t||void 0===t?void 0:t.category.name]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Description:"})," ",null===t||void 0===t?void 0:t.description]}),Object(O.jsx)("div",{className:"",children:null===t||void 0===t?void 0:t.images.map((function(e,t){return Object(O.jsx)("img",{src:e.image,className:"w-40 h-24 inline-block object-cover rounded mr-2 mb-2",alt:""},t)}))})]})]})},ae=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),r=t[0],n=t[1],a=Object(c.useState)(!1),s=Object(d.a)(a,2),o=s[0],i=s[1],l=Object(c.useState)(!1),u=Object(d.a)(l,2),b=u[0],p=u[1],x=Object(c.useState)({}),h=Object(d.a)(x,2),f=h[0],m=h[1],g=Object(c.useState)({}),_=Object(d.a)(g,2),S=_[0],C=_[1],v=Object(j.c)((function(e){return e.products})),T=v.products,R=v.fetched,y=v.loading,U=Object(j.b)();return Object(c.useEffect)((function(){R||P(U)}),[U,R]),y?Object(O.jsx)(F,{children:Object(O.jsx)(M,{})}):Object(O.jsxs)(F,{px:!0,children:[Object(O.jsxs)("div",{className:"py-9 flex justify-between",children:[Object(O.jsx)("p",{className:"text-lg text-white",children:"Products"}),Object(O.jsx)(E,{onClick:function(){return n(!0)},text:"Add new product"})]}),Object(O.jsx)(z,{products:T,setShowDPHandler:function(e){i(!0),m(e)},setShowUPHandler:function(e){p(!0),C(e)}}),r&&Object(O.jsx)(re,{showANP:r,setShowANP:n}),o&&Object(O.jsx)(ne,{product:f,setShowDP:i}),b&&Object(O.jsx)(ce,{setShowUP:p,selectedUP:S})]})},se=function(e){var t=e.setShowANC,r=Object(j.b)(),n=Object(j.c)((function(e){return e.categories})),a=n.categories,s=n.create_loading,o=n.create_error,i=Object(c.useState)(null),l=Object(d.a)(i,2),u=l[0],b=l[1],p=Object(c.useState)(""),h=Object(d.a)(p,2),f=h[0],m=h[1],g=Object(c.useState)(null),_=Object(d.a)(g,2),S=_[0],C=_[1],v=Object(c.useState)(),T=Object(d.a)(v,2),R=T[0],y=T[1];return Object(O.jsxs)("div",{className:"fixed inset-0 m-auto flex justify-center items-center",children:[Object(O.jsx)("div",{onClick:function(){return t(!1)},className:"fixed inset-0 m-auto bg-black bg-opacity-25 z-40"}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=new FormData;c.append("name",f),S&&c.append("image",S),(null===R||void 0===R?void 0:R._id)&&c.append("parent",R._id),$(r,c,t)},className:"bg-gray-200 relative overflow-y-auto z-50 w-96 p-5 max-h-minus_header flex flex-col space-y-3",children:[Object(O.jsx)("button",{onClick:function(){return t(!1)},type:"button",className:"absolute top-3 right-4 text-lg",children:"\xd7"}),Object(O.jsx)("p",{className:"py-0.5 text-lg text-blue-500",children:"Add New Category"}),o&&Object(O.jsx)("p",{className:"py-0.5 text-sm text-red-500",children:o}),Object(O.jsx)(x,{onChange:function(e){return m(e.target.value)},id:"name"}),Object(O.jsx)(V,{selectedCategory:R,setSelectedCategory:y,categories:a}),Object(O.jsx)("input",{type:"file",name:"image",id:"image",onChange:function(e){var t=e.target.files[0];if(C(t),t){var r=new FileReader;r.readAsDataURL(t),r.onload=function(e){b(e.target.result)}}}}),Object(O.jsx)("div",{children:u&&Object(O.jsxs)("div",{className:"relative w-20 h-16",children:[Object(O.jsx)("span",{onClick:function(){C(null),b(null)},className:"absolute cursor-pointer top-0 -right-3 flex justify-center items-center text-white bg-red-500 w-6 h-6 rounded-full",children:"\xd7"}),Object(O.jsx)("img",{alt:"",src:u,className:"w-full h-full object-cover inline-block ml-1 mt-1"})]})}),Object(O.jsx)(E,{type:"submit",text:"Add Category",loading:s})]})]})},oe=function(e){var t=e.setShowPopup,r=e.deleteCategory,n=Object(c.useState)(!1),a=Object(d.a)(n,2),s=a[0],o=a[1];return Object(O.jsxs)("div",{className:"fixed flex justify-center items-center inset-0 m-auto",children:[Object(O.jsx)("div",{onClick:function(){return t(!1)},className:"bg-black bg-opacity-25 fixed inset-0 z-40"}),Object(O.jsxs)("div",{className:"bg-red-100 text-red-500 p-5 fixed z-50",children:[Object(O.jsx)("b",{children:"Important:"}),Object(O.jsx)("p",{children:"every children category will delete!"}),Object(O.jsxs)("p",{className:"flex items-center space-x-1",children:[Object(O.jsx)("span",{children:"please sure again"}),Object(O.jsx)("input",{type:"checkbox",onClick:function(e){return o(e.target.checked)}})]}),Object(O.jsxs)("div",{className:"flex justify-between mt-5",children:[Object(O.jsx)(E,{onClick:function(){return t(!1)},text:"Cencel"}),Object(O.jsx)(E,{onClick:r,disabled:!s,text:"Delete",bg:"bg-red-500 ".concat(!s&&" opacity-25 cursor-not-allowed"," ")})]})]})]})},ie=function(e){var t,r=e.c,n=e.deletingCategory,a=e.editHandler,s=Object(c.useState)(!1),o=Object(d.a)(s,2),i=o[0],l=o[1];return Object(O.jsxs)("li",{className:"px-4 w-full  ".concat(i&&r.children.length>0?"my-6 border-l border-b":"my-4"),children:[Object(O.jsxs)("div",{className:"flex items-center text-white",children:[!i&&Object(O.jsx)("div",{className:"relative w-5 h-0.5 -ml-8 bg-white",children:Object(O.jsx)("span",{className:"block w-2 h-2 transform rotate-45 border border-white border-l-0 border-b-0 absolute inset-y-0 right-0 my-auto"})}),Object(O.jsxs)("div",{className:"flex p-2 transition-none items-center space-x-1 ".concat(i&&r.children.length>0&&"bg-black -ml-4"," "),children:[(null===r||void 0===r||null===(t=r.children)||void 0===t?void 0:t.length)>0&&Object(O.jsx)("button",{onClick:function(){return l((function(e){return!e}))},className:"border text-xs",children:i?Object(O.jsx)(B.c,{className:"w-4"}):Object(O.jsx)(B.d,{className:"w-4"})}),Object(O.jsx)("span",{className:"cursor-pointer  ".concat(i&&r.children.length>0&&"font-semibold tracking-wider"),children:r.name}),Object(O.jsx)("button",{onClick:function(){return a(r)},className:"px-1 py-0.5 rounded bg-gray-500  text-xs",children:"edit"}),Object(O.jsx)("button",{onClick:function(){return n(r._id)},className:"px-1 py-0.5 rounded bg-red-600  text-xs",children:"delete"})]})]}),i&&Object(O.jsx)(le,{categories:null===r||void 0===r?void 0:r.children,editHandler:a})]})};var le=function(e){var t=e.categories,r=e.editHandler,n=Object(j.b)(),a=Object(c.useState)(!1),s=Object(d.a)(a,2),o=s[0],i=s[1],l=Object(c.useState)(""),u=Object(d.a)(l,2),b=u[0],E=u[1],p=function(e){i(!0),E(e)};return Object(O.jsxs)("ul",{className:"",children:[o&&Object(O.jsx)(oe,{deleteCategory:function(){b&&Z(n,b,i)},setShowPopup:i}),null===t||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)(ie,{editHandler:r,c:e,deletingCategory:p},t)}))]})},ue=function(e){var t=e.setShowUC,r=e.selectedUC,n=Object(j.b)(),a=Object(j.c)((function(e){return e.categories})),s=a.categories,o=a.create_loading,i=a.create_error,l=Object(c.useState)(null),u=Object(d.a)(l,2),b=u[0],p=u[1],h=Object(c.useState)({}),f=Object(d.a)(h,2),m=f[0],g=f[1],_=Object(c.useState)(null),C=Object(d.a)(_,2),v=C[0],T=C[1],R=Object(c.useState)(),y=Object(d.a)(R,2),U=y[0],D=y[1];return Object(c.useEffect)((function(){g(null===r||void 0===r?void 0:r.name),p(null===r||void 0===r?void 0:r.image),(null===r||void 0===r?void 0:r.parent)&&S.get("/api/category/one/".concat(r.parent)).then((function(e){return e.data})).then((function(e){var t=e.error,r=e.category;if(t)return console.log(t);D(r)})).catch((function(e){return console.log("error ",e.message)}))}),[r]),Object(O.jsxs)("div",{className:"fixed inset-0 m-auto flex justify-center items-center",children:[Object(O.jsx)("div",{onClick:function(){return t(!1)},className:"fixed inset-0 m-auto bg-black bg-opacity-25 z-40"}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=new FormData;c.append("name",m),c.append("id",null===r||void 0===r?void 0:r._id),v&&c.append("image",v),(null===U||void 0===U?void 0:U._id)&&c.append("parent",U._id),ee(n,c,t)},className:"bg-gray-200 relative overflow-y-auto z-50 w-96 p-5 max-h-minus_header flex flex-col space-y-3",children:[Object(O.jsx)("button",{onClick:function(){return t(!1)},type:"button",className:"absolute top-3 right-4 text-lg",children:"\xd7"}),Object(O.jsx)("p",{className:"py-0.5 text-lg text-blue-500",children:"Update Category"}),i&&Object(O.jsx)("p",{className:"py-0.5 text-sm text-red-500",children:i}),Object(O.jsx)(x,{value:m,onChange:function(e){return g(e.target.value)},id:"name"}),Object(O.jsx)(V,{selectedCategory:U,setSelectedCategory:D,categories:s}),Object(O.jsx)("input",{type:"file",name:"image",id:"image",onChange:function(e){var t=e.target.files[0];if(T(t),t){var r=new FileReader;r.readAsDataURL(t),r.onload=function(e){p(e.target.result)}}}}),Object(O.jsx)("div",{children:b&&Object(O.jsxs)("div",{className:"relative w-20 h-16",children:[Object(O.jsx)("span",{onClick:function(){T(null),p(null)},className:"absolute cursor-pointer top-0 -right-3 flex justify-center items-center text-white bg-red-500 w-6 h-6 rounded-full",children:"\xd7"}),Object(O.jsx)("img",{alt:"",src:b,className:"w-full h-full object-cover inline-block ml-1 mt-1"})]})}),Object(O.jsxs)("div",{className:"flex justify-between",children:[Object(O.jsx)(E,{type:"button",onClick:function(){return t(!1)},text:"Cencel",loading:o}),Object(O.jsx)(E,{type:"submit",text:"Update",loading:o})]})]})]})},de=function(){var e=Object(j.c)((function(e){return e.categories})),t=e.categories,r=e.loading,n=e.error,a=e.fetched,s=Object(j.b)(),o=Object(c.useState)(!1),i=Object(d.a)(o,2),l=i[0],u=i[1],b=Object(c.useState)(!1),p=Object(d.a)(b,2),x=p[0],h=p[1],f=Object(c.useState)({}),m=Object(d.a)(f,2),g=m[0],_=m[1];return Object(c.useEffect)((function(){a||te(s)}),[a,s]),r?Object(O.jsx)(F,{children:Object(O.jsx)(M,{})}):n?Object(O.jsx)(F,{children:Object(O.jsx)("p",{className:"text-red-300",children:n})}):Object(O.jsxs)(F,{px:!0,children:[Object(O.jsxs)("div",{className:"py-9 flex justify-between",children:[Object(O.jsx)("p",{className:"text-lg text-white",children:"Categories"}),Object(O.jsx)(E,{onClick:function(){return u(!0)},text:"Add new category"})]}),Object(O.jsx)(le,{categories:t,setShowUC:h,editHandler:function(e){h(!0),_(e)}}),l&&Object(O.jsx)(se,{setShowANC:u}),x&&Object(O.jsx)(ue,{selectedUC:g,setShowUC:h})]})},je=function(){var e=Object(c.useState)(),t=Object(d.a)(e,2),r=t[0],n=t[1],a=function(){var e=Object(m.a)(f.a.mark((function e(){var t,c,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,Object.values(r).map((function(e){return t.append("image",e)})),e.next=4,S.post("/api/product/first",t);case 4:c=e.sent,n=c.data,console.log("data ",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(F,{children:[Object(O.jsx)("input",{type:"file",multiple:!0,onChange:function(e){return n(e.target.files)}}),Object(O.jsx)("button",{onClick:a,children:" Submit "})]})},be={DELETE_ORDER_REQUEST:"DELETE_ORDER_REQUEST",DELETE_ORDER_FAILED:"DELETE_ORDER_FAILED",DELETE_ORDER_SUCCESS:"DELETE_ORDER_SUCCESS",UPDATE_ORDER_REQUEST:"UPDATE_ORDER_REQUEST",UPDATE_ORDER_FAILED:"UPDATE_ORDER_FAILED",UPDATE_ORDER_SUCCESS:"UPDATE_ORDER_SUCCESS",UPDATE_PEYMENT_REQUEST:"UPDATE_PEYMENT_REQUEST",UPDATE_PEYMENT_FAILED:"UPDATE_PEYMENT_FAILED",UPDATE_PEYMENT_SUCCESS:"UPDATE_PEYMENT_SUCCESS",GET_ORDER_REQUEST:"GET_ORDER_REQUEST",GET_ORDER_FAILED:"GET_ORDER_FAILED",GET_ORDER_SUCCESS:"GET_ORDER_SUCCESS",GET_ORDERS_REQUEST:"GET_ORDERS_REQUEST",GET_ORDERS_FAILED:"GET_ORDERS_FAILED",GET_ORDERS_SUCCESS:"GET_ORDERS_SUCCESS",RESET_ERROR:"RESET_ERROR"},Oe=function(){var e=Object(m.a)(f.a.mark((function e(t){var r,c,n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:be.GET_ORDERS_REQUEST}),e.prev=1,e.next=4,S.get("/api/order/all");case 4:if(r=e.sent,c=r.data,n=c.success,a=c.error,s=c.orders,!a&&n){e.next=11;break}throw new Error(a||"something wrong!");case 11:t({type:be.GET_ORDERS_SUCCESS,payload:{orders:s}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:be.GET_ORDERS_FAILED,payload:{error:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(m.a)(f.a.mark((function e(t,r,c){var n,a,s,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:be.UPDATE_ORDER_REQUEST}),e.prev=1,e.next=4,S.put("/api/order/".concat(r),{type:c});case 4:if(n=e.sent,a=n.data,s=a.error,o=a.success,i=a.updatedOrder,!s&&o){e.next=11;break}throw new Error(s||"something wrong!");case 11:t({type:be.UPDATE_ORDER_SUCCESS,payload:{updatedOrder:i}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:be.UPDATE_ORDER_FAILED,payload:{error:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,r,c){return e.apply(this,arguments)}}(),pe=function(){var e=Object(m.a)(f.a.mark((function e(t,r,c){var n,a,s,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:be.UPDATE_PEYMENT_REQUEST}),e.prev=1,e.next=4,S.put("/api/order/peymentStatus/".concat(r),{peymentStatus:c});case 4:if(n=e.sent,a=n.data,s=a.error,o=a.success,i=a.updatedOrder,!s&&o){e.next=11;break}throw new Error(s||"something wrong!");case 11:t({type:be.UPDATE_PEYMENT_SUCCESS,payload:{updatedOrder:i}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:be.UPDATE_PEYMENT_FAILED,payload:{error:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,r,c){return e.apply(this,arguments)}}();function xe(e){var t=e.split("/");function r(e){return e.length<2?"0"+e:e}return r(t[1])+"/"+r(t[0])+"/"+t[2]}var he=function(e){var t=e.order,r=Object(j.b)(),n=Object(j.c)((function(e){return e.order})).loading,a=Object(c.useState)(0),s=Object(d.a)(a,2),o=s[0],i=s[1],l=Object(c.useState)(""),u=Object(d.a)(l,2),b=u[0],p=u[1],x=Object(c.useState)(""),h=Object(d.a)(x,2),f=h[0],m=h[1];return Object(c.useEffect)((function(){null===t||void 0===t||t.orderStatus.map((function(e,t){return e.isCompleted&&i(t+1),null}))}),[t,n]),Object(O.jsxs)("div",{className:"bg-gray-800 text-white m-5",children:[Object(O.jsxs)("p",{className:"h-header w-full bg-gray-700 flex space-x-1 items-center px-5",children:[Object(O.jsx)("b",{className:"text-gray-300",children:" ORDER ID: "}),Object(O.jsxs)("span",{children:[" ",null===t||void 0===t?void 0:t._id," "]})]}),Object(O.jsxs)("div",{className:"flex justify-between p-5",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"font-semibold border-b mb-1 ",children:"items"}),null===t||void 0===t?void 0:t.items.map((function(e){return Object(O.jsx)("p",{className:"text-xs",children:e.product.name},e._id)}))]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"font-semibold border-b mb-1 ",children:"Total Price"}),Object(O.jsx)("p",{children:null===t||void 0===t?void 0:t.amount})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"font-semibold border-b mb-1 ",children:"Peyment Type"}),Object(O.jsx)("p",{children:null===t||void 0===t?void 0:t.peymentMethod})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"font-semibold border-b mb-1 ",children:"Peyment Status"}),Object(O.jsx)("p",{children:null===t||void 0===t?void 0:t.peymentStatus})]})]}),Object(O.jsx)("div",{className:"flex justify-center px-10 py-16",children:null===t||void 0===t?void 0:t.orderStatus.map((function(e,t){return 0===t?Object(O.jsxs)("div",{className:"-mr-7 flex flex-col items-center",children:[Object(O.jsx)("p",{children:e.type}),Object(O.jsx)("div",{className:"h-2 z-30 my-3 flex items-center justify-start",children:Object(O.jsx)("div",{className:"bg-green-500  w-6 h-6  rounded-full flex items-center justify-center",children:Object(O.jsx)(B.b,{className:"w-3"})})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"text-xs font-semibold",children:xe(e.date[0])}),Object(O.jsx)("p",{className:"text-xs",children:e.date[1]})]})]},e._id):Object(O.jsxs)("div",{className:" w-1/4 flex flex-col justify-start items-center",children:[Object(O.jsx)("p",{className:"w-full text-right",children:e.type}),Object(O.jsx)("div",{className:"".concat(e.isCompleted?"bg-green-400":"bg-gray-500"," w-full h-2 my-3 flex items-center justify-end"),children:Object(O.jsxs)("div",{className:"".concat(e.isCompleted?"bg-green-500":"bg-blue-500"," w-6 h-6  rounded-full flex items-center justify-center"),children:[e.isCompleted&&Object(O.jsx)(B.b,{className:"w-3"}),o===t&&Object(O.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})]})}),e.isCompleted&&Object(O.jsxs)("div",{className:"w-full text-right",children:[Object(O.jsx)("p",{className:"text-xs font-semibold",children:e.date[0]}),Object(O.jsx)("p",{className:"text-xs",children:e.date[1]})]})]},e._id)}))}),Object(O.jsx)("div",{className:"flex items-center justify-center space-x-5 mx-auto pb-8",children:o>3?Object(O.jsxs)("p",{className:"text-green-300 flex items-center space-x-1",children:[Object(O.jsx)("b",{children:"Order Delivery Completed"})," ",Object(O.jsx)(B.a,{className:"w-6"})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{className:"font-semibold text-gray-300",children:"Update Order Status"}),Object(O.jsxs)("select",{onChange:function(e){return p(e.target.value)},className:"p-2 w-44 bg-black focus:ring outline-none",children:[Object(O.jsx)("option",{value:"",className:"text-gray-500",children:"Select"}),null===t||void 0===t?void 0:t.orderStatus.map((function(e,t){return o===t&&Object(O.jsx)("option",{value:e.type,children:e.type},e.type)}))]}),Object(O.jsx)(E,{disabled:!b,onClick:function(){b&&Ee(r,t._id,b)},loading:n,text:"Confirm",bg:"bg-green-500 w-44"})]})}),o>3?Object(O.jsx)(O.Fragment,{}):Object(O.jsxs)("div",{className:"flex items-center justify-center space-x-5 mx-auto pb-8",children:[Object(O.jsx)("p",{className:"font-semibold text-gray-300",children:"Update Peyment Status"}),Object(O.jsxs)("select",{onChange:function(e){return m(e.target.value)},className:"p-2 w-44 bg-black focus:ring outline-none",children:[Object(O.jsx)("option",{value:"",className:"text-gray-500",children:"Select"}),Object(O.jsx)("option",{value:"pending",children:"Pending"},b.type),Object(O.jsx)("option",{value:"completed",children:"Completed"},b.type),Object(O.jsx)("option",{value:"cancelled",children:"Cancelled"},b.type),Object(O.jsx)("option",{value:"refunt",children:"Refund"},b.type)]}),Object(O.jsx)(E,{disabled:!f,onClick:function(){f&&pe(r,t._id,f)},loading:n,text:"Confirm",bg:"bg-green-500 w-44"})]})]})},fe=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.order})),r=t.orders,n=t.fetched;return Object(c.useEffect)((function(){n||Oe(e)}),[e,n]),Object(O.jsx)(F,{children:null===r||void 0===r?void 0:r.map((function(e){return Object(O.jsx)(he,{order:e},e._id)}))})},me=function(){var e=Object(j.b)();return Object(c.useEffect)((function(){T(e)}),[e]),Object(O.jsxs)(o.a,{basename:"/stackshop-admin",children:[Object(O.jsx)(y,{}),Object(O.jsxs)(i.d,{children:[Object(O.jsx)(U,{exact:!0,path:"/",component:je}),Object(O.jsx)(U,{exact:!0,path:"/products",component:ae}),Object(O.jsx)(U,{exact:!0,path:"/categories",component:de}),Object(O.jsx)(U,{exact:!0,path:"/orders",component:fe}),Object(O.jsx)(D,{exact:!0,path:"/signin",component:R}),Object(O.jsx)(D,{exact:!0,path:"/signup",component:w})]})]})},ge=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,75)).then((function(t){var r=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),c(e),n(e),a(e),s(e)}))},_e=r(24),Se={user:null,error:null,authenticated:!1,loading:!1},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0,r=t.type,c=t.payload;switch(r){case g.SIGNIN_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case g.SIGNIN_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,authenticated:!0,user:c.user,error:null});case g.SIGNIN_FAILED:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,authenticated:!1,user:null,error:c.error});case g.SIGNUP_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case g.SIGNUP_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,authenticated:!0,user:c.user,error:null});case g.SIGNUP_FAILED:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,authenticated:!1,user:null,error:c.error});case g.LOGOUT:return Object(u.a)(Object(u.a)({},e),{},{authenticated:!1,user:null,error:null});default:return e}};function ve(e,t){return e.filter((function(e){return e._id!==t._id}))}function Te(e,t){var r=e.filter((function(e){return e._id!==t._id}));return[].concat(Object(H.a)(r),[t])}var Re={products:null,loading:!1,error:null,fetched:!1,create_loading:!1,create_error:null,delete_loading:!1,delete_error:!1,update_loading:!1,update_error:!1},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0,r=t.type,c=t.payload;switch(r){case N.RESET_ERROR:return Object(u.a)(Object(u.a)({},e),{},{error:null,create_error:null,delete_loading:null,update_error:null});case N.DELETE_PRODUCT_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{delete_loading:!0});case N.DELETE_PRODUCT_FAILED:return Object(u.a)(Object(u.a)({},e),{},{delete_loading:!1,delete_error:c.error});case N.DELETE_PRODUCT_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{delete_loading:!1,delete_error:null,products:ve(e.products,c.deleted)});case N.CREATE_PRODUCT_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{create_loading:!0});case N.CREATE_PRODUCT_FAILED:return Object(u.a)(Object(u.a)({},e),{},{create_loading:!1,create_error:c.error});case N.CREATE_PRODUCT_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{create_loading:!1,create_error:null,products:[].concat(Object(H.a)(e.products),[c.product])});case N.UPDATE_PRODUCT_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{update_loading:!0});case N.UPDATE_PRODUCT_FAILED:return Object(u.a)(Object(u.a)({},e),{},{update_loading:!1,update_error:c.error});case N.UPDATE_PRODUCT_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{update_loading:!1,update_error:null,products:Te(e.products,c.product)});case N.GET_PRODUCTS_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case N.GET_PRODUCTS_FAILED:return Object(u.a)(Object(u.a)({},e),{},{error:c.error,loading:!1});case N.GET_PRODUCTS_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{products:c.products,loading:!1,fetched:!0,error:null});default:return e}},Ue=function e(t,r){var c=[];if(!(null===r||void 0===r?void 0:r.parent))return[].concat(Object(H.a)(t),[r]);var n,a=Object(q.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;s._id===r.parent?c.push(Object(u.a)(Object(u.a)({},s),{},{children:e([].concat(Object(H.a)(s.children),[r]),r)})):c.push(Object(u.a)(Object(u.a)({},s),{},{children:e(s.children,r)}))}}catch(o){a.e(o)}finally{a.f()}return c},De={categories:null,loading:null,error:null,fetched:!1,create_loading:!1,create_error:!1,update_loading:!1,update_error:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0,r=t.type,c=t.payload;switch(r){case W.DELETE_CATEGORY_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{delete_loading:!0});case W.DELETE_CATEGORY_FAILED:return Object(u.a)(Object(u.a)({},e),{},{delete_loading:!1,delete_error:c.error});case W.DELETE_CATEGORY_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{delete_loading:!1,categories:c.categories});case W.CREATE_CATEGORY_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{create_loading:!0});case W.CREATE_CATEGORY_FAILED:return Object(u.a)(Object(u.a)({},e),{},{create_loading:!1,create_error:c.error});case W.CREATE_CATEGORY_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{create_loading:!1,create_error:null,categories:Ue(e.categories,c.category),fetched:!0});case W.UPDATE_CATEGORY_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{update_loading:!0});case W.UPDATE_CATEGORY_FAILED:return Object(u.a)(Object(u.a)({},e),{},{update_loading:!1,update_error:c.error});case W.UPDATE_CATEGORY_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{update_loading:!1,update_error:null,categories:c.categories});case W.GET_CATEGORIES_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case W.GET_CATEGORIES_FAILED:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:c.error});case W.GET_CATEGORIES_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:null,categories:c.categories,fetched:!0});case W.RESET_ERROR:return Object(u.a)(Object(u.a)({},e),{},{error:null,create_error:null,delete_error:null,update_error:null});default:return e}};function Ne(e,t){var r=t.filter((function(t){return t._id!==e._id}));return[].concat(Object(H.a)(r),[e])}var Ae={orders:null,error:null,loading:!1,fetched:!1},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0,r=t.type,c=t.payload;switch(r){case be.GET_ORDERS_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case be.GET_ORDERS_FAILED:return Object(u.a)(Object(u.a)({},e),{},{error:c.error,loading:!1});case be.GET_ORDERS_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{orders:c.orders,loading:!1,fetched:!0,error:null});case be.UPDATE_ORDER_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case be.UPDATE_ORDER_FAILED:return Object(u.a)(Object(u.a)({},e),{},{error:c.error,loading:!1});case be.UPDATE_ORDER_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{orders:Ne(c.updatedOrder,e.orders),loading:!1,fetched:!0,error:null});case be.UPDATE_PEYMENT_REQUEST:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case be.UPDATE_PEYMENT_FAILED:return Object(u.a)(Object(u.a)({},e),{},{error:c.error,loading:!1});case be.UPDATE_PEYMENT_SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{orders:Ne(c.updatedOrder,e.orders),loading:!1,fetched:!0,error:null});default:return e}},Ge=Object(_e.b)({auth:Ce,products:ye,categories:we,order:Pe}),ke=Object(_e.c)(Ge,_e.a.apply(void 0,[]));window.store=ke,s.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(j.a,{store:ke,children:Object(O.jsx)(me,{})})}),document.getElementById("root")),ge()}},[[74,1,2]]]);
//# sourceMappingURL=main.befec890.chunk.js.map